<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- model-viewer for 3D avatar -->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.153.0/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/loaders/GLTFLoader.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <title>Disease Prediction</title>
    <style>
       :root {
  --primary: #FFE6E6;
  --primary-light: #4FC1AF;
  --secondary: #CC543F;
  --accent: #00C9A7;
  --light: #33AB9F;
  --dark: #001919;
  --gray: #666;
  --white: #fff;
  --background: #f9f9f9;
  --text: #333;
  --shadow: rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;
}

/* Global Styles */
body {
  font-family: Arial, sans-serif;
  background-color: #ffe6e6;
  margin: 0;
  padding: 0;
  color: #333;
  transition: var(--transition);
  font-size: 16px;
}

/* Dark Theme Styles */
body.dark-theme {
  background-color: #1a1a1a;
  color: #f0f0f0;
}

body.dark-theme .container {
  background-color: #333;
  box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
}

body.dark-theme .nav-links a {
  color: #f0f0f0;
}

body.dark-theme .theme-toggle {
  color: #f0f0f0;
}

body.dark-theme h1, 
body.dark-theme h2 {
  color: #f0f0f0;
}

body.dark-theme .tab-content {
  background-color: #333;
}

body.dark-theme #chat-interface {
  background: #2a2a2a;
}

body.dark-theme .user-message {
  background-color: #444;
  color: #f0f0f0;
}

body.dark-theme .bot-message,
body.dark-theme .nurse-message {
  background-color: #555;
  color: #f0f0f0;
}

body.dark-theme .chat-input-area input {
  background-color: #444;
  color: #f0f0f0;
  border-color: #666;
}

body.dark-theme .doctor-card {
  background-color: #444;
  color: #f0f0f0;
}

.container {
  max-width: 90%;
  width: 800px;
  margin: 20px auto;
  padding: 20px;
  background-color: #fff;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border-radius: 10px;
}

/* Navbar styling */
nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 5%;
  background-color: #ffe6e6;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  position: relative;
  z-index: 1000;
}

body.dark-theme nav {
  background-color: #222;
  box-shadow: 0 2px 10px rgba(255, 255, 255, 0.05);
}

.logo {
  display: flex;
  align-items: center;
  font-size: 24px;
  font-weight: 700;
  color: var(--accent);
}

.logo img {
  width: 50px;
  height: 50px;
  margin-right: 10px;
  border-radius: 50%;
}

.logo span {
  color: var(--secondary);
  margin-left: 5px;
}

body.dark-theme .logo {
  color: #00C9A7;
}

body.dark-theme .logo span {
  color: #ff7a66;
}

.nav-links {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
}

.nav-links li {
  margin-left: 70px;
}

.nav-links a {
  text-decoration: none;
  color: var(--text);
  font-weight: 500;
  transition: var(--transition);
}

.nav-links a:hover {
  color: var(--accent);
}

.right-nav {
  display: flex;
  align-items: center;
}

.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 24px;
  color: var(--text);
  transition: var(--transition);
  margin-left: 20px;
  padding: 5px;
}

.theme-toggle:hover {
  color: var(--accent);
}

.mobile-menu {
  display: none;
  font-size: 24px;
  cursor: pointer;
  margin-left: 15px;
}

/* Mobile Menu */
.mobile-nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--background);
  z-index: 1001;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  transform: translateX(-100%);
}

.mobile-nav.active {
  transform: translateX(0);
}

.mobile-nav-close {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 24px;
  cursor: pointer;
  color: var(--text);
}

.mobile-nav-links {
  list-style: none;
  text-align: center;
  padding: 0;
}

.mobile-nav-links li {
  margin-bottom: 20px;
}

.mobile-nav-links a {
  text-decoration: none;
  color: var(--text);
  font-size: 24px;
  font-weight: 500;
  transition: var(--transition);
}

.mobile-nav-links a:hover {
  color: var(--accent);
}

h1, h2 {
  color: #333;
  text-align: center;
  margin-bottom: 20px;
}

label {
  display: block;
  font-weight: bold;
  margin-bottom: 8px;
}

/* Tab Navigation */
.tabs {
  display: flex;
  justify-content: space-around;
  background-color: #009688;
  border-radius: 10px 10px 0 0;
  overflow: hidden;
  flex-wrap: wrap;
}

.tabs button {
  flex: 1;
  padding: 10px 20px;
  background-color: #009688;
  color: white;
  border: none;
  font-size: 16px;
  cursor: pointer;
  outline: none;
  min-width: 120px;
}

.tabs button.active {
  background-color: #00796b;
}

.tab-content {
  display: none;
  padding: 20px;
}

.tab-content.active {
  display: block;
}

/* Symptom Selection Form */
#symptom-form {
  margin-bottom: 20px;
}

.custom-dropdown {
  position: relative;
}

.custom-dropdown button {
  display: block;
  width: 100%;
  background-color: #009688;
  color: #fff;
  padding: 10px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
}

.custom-dropdown ul {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background-color: #fff;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border-radius: 5px;
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  padding: 10px 0;
}

.custom-dropdown ul li {
  padding: 10px 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.custom-dropdown ul li input[type="checkbox"] {
  margin: 0;
}

.custom-dropdown ul li:hover {
  background-color: #f2f2f2;
}

.selected-symptoms {
  margin-top: 15px;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background-color: #f9f9f9;
}

.selected-symptoms ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* Buttons */
.btn {
  background-color: #009688;
  color: #fff;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  margin-top: 10px;
  width: auto;
  display: inline-block;
}

.btn:hover {
  background-color: #00796b;
}

/* Prediction Result */
#prediction-result {
  background-color: #f9f9f9;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  color: #333;
  font-size: 18px;
}

/* Doctor Suggestions */
#doctor-suggestion {
  margin-top: 20px;
  display: none;
}

.doctor-card {
  background-color: #fff;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  width: 100%;
  box-sizing: border-box;
}

.doctor-card h3 {
  margin-top: 0;
}

.doctor-card button {
  background-color: #ffb74d;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  transition: background-color 0.3s, transform 0.3s;
}

.doctor-card button:hover {
  background-color: #ff9800;
  transform: scale(1.05);
}

/* Appointment Booking Form */
.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 500px;
  background-color: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  padding: 20px;
}

.modal-content {
  max-height: 70vh;
  overflow-y: auto;
}

.scrollable-form {
  padding: 15px;
}

fieldset {
  border: 1px solid #ccc;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  width: 100%;
  box-sizing: border-box;
}

legend {
  font-weight: bold;
}

input[type="text"],
input[type="tel"],
input[type="email"],
select {
  width: 100%;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

input[type="text"]:focus,
input[type="tel"]:focus,
input[type="email"]:focus,
select:focus {
  border-color: #009688;
  outline: none;
  box-shadow: 0 0 5px rgba(0, 150, 136, 0.5);
}

.form-actions {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 10px;
}

.form-actions button {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background-color: #009688;
  color: white;
  flex-grow: 1;
  margin: 5px;
}

/* Overlay Effect for Modal */
.modal + .modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  z-index: 999;
}

.site-header {
  display: flex;
  align-items: center;
  padding: 20px;
  background-color: #ffe6e6;
}

.logo {
  display: flex;
  align-items: center;
}

.logo-img {
  width: 80px;
  height: auto;
  margin-right: 15px;
}

.logo-name {
  font-size: 24px;
  font-weight: bold;
  color: #009688;
}

.btn-upload {
  margin-top: 20px;
}

.result {
  margin-top: 30px;
  padding: 15px;
  border-radius: 10px;
}

.result.success {
  background-color: #d4edda;
  color: #155724;
}

.result.error {
  background-color: #f8d7da;
  color: #721c24;
}

/* Revised Chat Interface with Responsive Nurse Elements */
#chat-interface {
  position: relative;
  padding-top: 160px;
  max-width: 100%;
  width: 600px;
  margin: auto;
  margin-top: 70px;
  background: #f7fdfd;
  border-radius: 20px;
  padding-bottom: 20px;
  box-shadow: 0 0 20px rgba(0, 150, 136, 0.2);
}

.nurse-floating {
  position: absolute;
  top: -40px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  z-index: 2;
  width: auto; /* Changed from 100% to auto */
}

.nurse-avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #fff;
  background-color: #ffffff;
  transition: var(--transition);
  position: relative; /* Added for bubble positioning */
}

.nurse-bubble {
  position: absolute;
  top: 10px; /* Adjust this to move up/down relative to avatar */
  right: -160px; /* Positions bubble to the right of avatar */
  background-color: #009688;
  color: white;
  padding: 12px 16px;
  border-radius: 20px;
  font-size: 14px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  width: 180px;
  text-align: left;
  transition: var(--transition);
}

/* Speech bubble pointer */
.nurse-bubble::before {
  content: '';
  position: absolute;
  left: -10px;
  top: 20px;
  width: 0;
  height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-right: 10px solid #009688;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .nurse-bubble {
    right: -140px;
    width: 150px;
  }
}

@media (max-width: 768px) {
  .nurse-floating {
    top: -30px;
  }
  
  .nurse-avatar {
    width: 100px;
    height: 100px;
  }
  
  .nurse-bubble {
    right: -120px;
    width: 130px;
    font-size: 13px;
    padding: 10px 14px;
    top: 5px;
  }
  
  .nurse-bubble::before {
    top: 15px;
  }
}

@media (max-width: 480px) {
  .nurse-floating {
    top: -20px;
  }
  
  .nurse-avatar {
    width: 80px;
    height: 80px;
  }
  
  .nurse-bubble {
    right: -100px;
    width: 110px;
    font-size: 12px;
    padding: 8px 12px;
    top: 0;
  }
  
  .nurse-bubble::before {
    top: 10px;
  }
}

@media (max-width: 360px) {
  /* Stack vertically when space is very limited */
  .nurse-floating {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .nurse-bubble {
    position: relative;
    right: auto;
    top: 5px;
    margin-top: 5px;
  }
  
  .nurse-bubble::before {
    left: 50%;
    top: -10px;
    transform: translateX(-50%);
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid #009688;
    border-top: none;
  }
}
#chat-window {
  max-height: 400px;
  overflow-y: auto;
  padding: 20px;
  margin-bottom: 10px;
}

.chat-message {
  margin: 10px 0;
  padding: 12px 16px;
  border-radius: 20px;
  max-width: 70%;
  line-height: 1.4;
  word-wrap: break-word;
}

.user-message {
  background-color: #e0f2f1;
  align-self: flex-end;
  text-align: right;
  margin-left: auto;
}

.bot-message {
  background-color: #d0f0ff;
  align-self: flex-start;
  text-align: left;
  margin-right: auto;
}

.chat-input-area {
  display: flex;
  padding: 10px 20px;
  gap: 10px;
  flex-wrap: wrap;
}

.chat-input-area input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #ccc;
  border-radius: 20px;
  outline: none;
  font-size: 16px;
  min-width: 200px;
}

.chat-input-area button {
  background-color: #009688;
  color: white;
  border: none;
  border-radius: 50%;
  padding: 10px 14px;
  cursor: pointer;
  font-size: 18px;
  min-width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Fade-in effect for messages */
@keyframes fadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

.user-message, .nurse-message {
  animation: fadeIn 0.5s ease-out;
}

/* Disease Prediction Styling */
.disease-prediction {
  background-color: #f8d7da;
  border-left: 5px solid #f44336;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 8px;
  color: #721c24;
  font-size: 18px;
  font-weight: bold;
  font-family: Arial, sans-serif;
}

/* Precautions Section Styling */
.precautions-section {
  background-color: #fff3cd;
  border-left: 5px solid #ff9800;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 8px;
  color: #856404;
  font-size: 16px;
  font-family: Arial, sans-serif;
}

.precautions-section h3 {
  margin-bottom: 10px;
  font-size: 18px;
  font-weight: bold;
}

/* Routine Suggestions Section Styling */
.routine-suggestions-section {
  background-color: #d4edda;
  border-left: 5px solid #4caf50;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 8px;
  color: #155724;
  font-size: 16px;
  font-family: Arial, sans-serif;
}

.routine-suggestions-section h3 {
  margin-bottom: 10px;
  font-size: 18px;
  font-weight: bold;
}

.routine-suggestions-section ul {
  margin-left: 20px;
}

.routine-suggestions-section li {
  margin-bottom: 8px;
  font-size: 15px;
  color: #155724;
}

.ai-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  z-index: 1000;
}

/* Revised Guide Modal Styles */
.guide-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
  z-index: 1000;
  display: none;
}

.guide-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 600px;
  background-color: white;
  border-radius: 15px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  z-index: 1100;
  max-height: 80vh;
  overflow-y: auto;
  padding: 20px;
}

.guide-modal-close {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 24px;
  cursor: pointer;
  color: #009688;
}

.guide-modal-content {
  text-align: center;
  padding: 15px;
}

.guide-modal-content h2 {
  color: #009688;
  margin-bottom: 20px;
  font-size: 1.8rem;
}

.guide-modal-content .demo-images {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 20px;
}

.guide-modal-content .demo-image {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
  cursor: pointer;
}

.guide-modal-content .demo-image:hover {
  transform: scale(1.02);
}

.guide-modal-content .guidelines {
  background-color: #f0f0f0;
  border-radius: 10px;
  padding: 15px;
  margin-top: 20px;
  text-align: left;
}

.guidelines h3 {
  color: #009688;
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.guidelines ul {
  padding-left: 20px;
}

.guidelines li {
  margin-bottom: 8px;
  font-size: 1rem;
}

/* Guide Button Styles */
.guide-button {
  position: absolute;
  top: 10px;
  right: 20px;
  background-color: #009688;
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: transform 0.3s ease;
  z-index: 3;
}

.guide-button:hover {
  transform: scale(1.1);
}

.guide-button::after {
  content: 'Guide';
  position: absolute;
  bottom: -25px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0,0,0,0.7);
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.guide-button:hover::after {
  opacity: 1;
}

/* Lightbox Modal */
.lightbox-modal {
  display: none;
  position: fixed;
  z-index: 1200;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.9);
  animation: fadeIn 0.3s ease;
}

.lightbox-content {
  margin: auto;
  display: block;
  max-width: 90%;
  max-height: 90%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  cursor: zoom-in;
  transition: transform 0.3s ease;
}

.lightbox-close {
  position: absolute;
  top: 20px;
  right: 35px;
  color: white;
  font-size: 40px;
  font-weight: bold;
  cursor: pointer;
  z-index: 1300;
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes float {
  0% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
  100% {
    transform: translateY(0px);
  }
}

.circle-bg {
  position: absolute;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.3);
  z-index:-5;
}

.circle-1 {
  width: 300px;
  height: 300px;
  top: -50px;
  left: -50px;
  z-index:-5;
}

.circle-2 {
  width: 200px;
  height: 200px;
  bottom: 50px;
  left: 25%;
  z-index:-5;
}

.circle-3 {
  width: 250px;
  height: 250px;
  top: 30%;
  right: 10%;
  z-index:-5;
}

.circle-4 {
  width: 180px;
  height: 180px;
  bottom: -50px;
  right: 20%;
  z-index:-5;
}

.icon-float {
  position: absolute;
  opacity: 0.2;
  z-index:-5;
}

.icon-user {
  top: 15%;
  right: 5%;
  font-size: 60px;
  z-index:-5;
}

.icon-calendar {
  bottom: 20%;
  left: 10%;
  font-size: 50px;
  z-index:-5;
}

.icon-chart {
  top: 30%;
  left: 10%;
  font-size: 40px;
  z-index:-5;
}

.decorative-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -10;
  overflow: hidden;
}

/* Media Queries for Responsive Design */
@media (max-width: 1024px) {
  .nurse-bubble {
    right: -120px;
    width: 150px;
    font-size: 13px;
    padding: 10px 14px;
  }
  
  .guide-modal-content h2 {
    font-size: 1.6rem;
  }
}

@media (max-width: 768px) {
  .nav-links {
    display: none;
  }
  
  .mobile-menu {
    display: block;
  }
  
  .container {
    width: 95%;
    padding: 15px;
  }
  
  .tabs button {
    padding: 8px 10px;
    font-size: 14px;
  }
  
  #chat-interface {
    width: 100%;
    margin-top: 50px;
    padding-top: 140px;
  }

  .nurse-avatar {
    width: 100px;
    height: 100px;
  }
  
  .nurse-bubble {
    right: -100px;
    width: 130px;
    font-size: 12px;
    padding: 8px 12px;
  }

  .doctor-card {
    padding: 10px;
  }
  
  .doctor-card button {
    width: 100%;
    margin-top: 10px;
  }
  
  .modal {
    width: 95%;
    padding: 10px;
  }
  
  fieldset {
    padding: 10px;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .form-actions button {
    width: 100%;
    margin: 5px 0;
  }

  input[type="file"] {
    width: 100%;
  }
  
  .btn {
    width: 100%;
  }
  
  .guide-modal {
    padding: 15px;
  }
  
  .guide-modal-content h2 {
    font-size: 1.4rem;
  }
  
  .demo-images {
    flex-direction: column;
  }
  
  .demo-image {
    max-width: 80%;
  }
}

@media (max-width: 480px) {
  .container {
    width: 100%;
    margin: 10px auto;
    padding: 10px;
  }
  
  h1, h2 {
    font-size: 1.5rem;
  }
  
  .logo {
    font-size: 20px;
  }
  
  .logo img {
    width: 40px;
    height: 40px;
  }
  
  .tabs {
    flex-direction: column;
  }
  
  .tabs button {
    border-radius: 0;
    border-bottom: 1px solid rgba(255,255,255,0.2);
  }
  
  .tabs button:first-child {
    border-radius: 10px 10px 0 0;
  }
  
  #chat-interface {
    padding-top: 120px;
  }
  
  .nurse-floating {
    top: -30px;
  }
  
  .nurse-avatar {
    width: 80px;
    height: 80px;
    border-width: 3px;
  }
  
  .nurse-bubble {
    right: -80px;
    width: 110px;
    font-size: 11px;
    padding: 6px 10px;
    top: 0;
  }
  
  .chat-message {
    max-width: 85%;
  }
  
  .chat-input-area {
    padding: 5px 10px;
  }
  
  .chat-input-area input {
    padding: 8px 12px;
  }
  
  fieldset legend {
    font-size: 14px;
  }
  
  .result {
    padding: 10px;
  }
  
  .guide-modal {
    width: 95%;
    padding: 10px;
  }
  
  .guide-modal-close {
    top: 10px;
    right: 10px;
    font-size: 20px;
  }
  
  .guide-modal-content h2 {
    font-size: 1.3rem;
  }
  
  .guidelines {
    padding: 10px;
  }
}

@media (max-width: 360px) {
  .container {
    padding: 5px;
  }
  
  .logo span {
    display: none;
  }
  
  .chat-input-area input {
    min-width: 150px;
  }
  
  .nurse-floating {
    display: flex;
    flex-direction: column;
    align-items: center;
    top: -50px;
  }
  
  .nurse-bubble {
    position: relative;
    right: auto;
    top: 5px;
    width: 140px;
    margin-top: 5px;
  }
  
  .doctor-card h3 {
    font-size: 16px;
  }
  
  .guide-button {
    width: 40px;
    height: 40px;
    font-size: 18px;
  }
  
  .guide-modal-content {
    padding: 10px;
  }
  
  .demo-image {
    max-width: 90%;
  }
}

/* High-res displays */
@media (min-width: 1400px) {
  .container {
    max-width: 1000px;
  }
  
  body {
    font-size: 18px;
  }
  
  #chat-interface {
    width: 700px;
  }
}

/* Dark theme adjustments for guide modal */
body.dark-theme .guide-modal {
  background-color: #333;
  color: #f0f0f0;
}

body.dark-theme .guide-modal-close {
  color: #00C9A7;
}

body.dark-theme .guide-modal-content h2 {
  color: #00C9A7;
}

body.dark-theme .guidelines {
  background-color: #444;
}


/* Updated Feedback Modal Styles */
.modalfeedback {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 500px;
  background-color: #fff;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 150, 136, 0.3);
  z-index: 1100;
  padding: 30px;
  display: none;
  animation: fadeInUp 0.5s ease-out;
  border: 1px solid rgba(0, 201, 167, 0.3);
}

body.dark-theme .modalfeedback {
  background-color: #333;
  color: #f0f0f0;
  box-shadow: 0 10px 30px rgba(0, 201, 167, 0.2);
  border: 1px solid rgba(0, 201, 167, 0.2);
}

.modalfeedback h2 {
  color: #009688;
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.8rem;
  position: relative;
  padding-bottom: 10px;
}

.modalfeedback h2::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 3px;
  background: linear-gradient(90deg, #009688, #00C9A7);
  border-radius: 3px;
}

.modalfeedback p {
  text-align: center;
  margin-bottom: 30px;
  font-size: 1.1rem;
  line-height: 1.6;
}

.modal-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.modal-buttons .btn {
  padding: 12px 25px;
  border-radius: 30px;
  font-weight: 600;
  transition: all 0.3s ease;
  min-width: 150px;
  text-align: center;
}

.modal-buttons .btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0, 150, 136, 0.3);
}

.btn-secondary {
  background-color: #6c757d;
}

.btn-secondary:hover {
  background-color: #5a6268;
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
}

/* 3D Model Container Styles */
.feedback-model-container {
  position: relative;
  margin: 0 auto 30px;
  width: 200px;
  height: 200px;
  text-align: center;
  perspective: 1000px;
}

/* Updated Speech Bubble Styles */
.feedback-bubble {
  position: absolute;
  top: -5px;
  right: -20px;
  background-color: #009688;
  color: white;
  padding: 12px 16px;
  border-radius: 20px;
  font-size: 14px;
  box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
  width: 180px;
  text-align: center;
  animation: float 3s ease-in-out infinite;
  z-index: 10;
}

.feedback-bubble::before {
  content: '';
  position: absolute;
  right: 20px;
  bottom: -10px;
  width: 0;
  height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #009688;
}

/* Model Viewer Animation */
model-viewer {
  width: 150px;
  height: 150px;
  top: 60px;
  margin: 0 auto;
  animation: model-bounce 2s ease-in-out infinite;
  filter: drop-shadow(0 5px 10px rgba(0, 150, 136, 0.3));
}

@keyframes model-bounce {
  0%, 100% { 
    transform: translateY(0) rotateY(0deg);
  }
  50% { 
    transform: translateY(-10px) rotateY(10deg);
  }
}

/* Pulse animation for attention */
@keyframes pulse-glow {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 201, 167, 0.4);
  }
  70% {
    box-shadow: 0 0 0 15px rgba(0, 201, 167, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(0, 201, 167, 0);
  }
}

/* Add this to your existing animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate(-50%, -40%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .modalfeedback {
    width: 95%;
    padding: 20px;
  }
  
  .feedback-model-container {
    width: 150px;
    height: 150px;
  }
  
  model-viewer {
    width: 120px;
    height: 120px;
  }
  
  .feedback-bubble {
    width: 150px;
    font-size: 13px;
    right: -10px;
  }
  
  .modal-buttons {
    flex-direction: column;
    gap: 10px;
  }
  
  .modal-buttons .btn {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .modalfeedback h2 {
    font-size: 1.5rem;
  }
  
  .feedback-bubble {
    width: 130px;
    font-size: 12px;
    padding: 10px 12px;
    top: -20px;
  }
}
    </style>
    
    <body>
  <nav>
      <div class="logo">
        <img src="static/logo.png" alt="MediAI Logo">
        Bat<span>Med</span>
      </div>
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
      </ul>
      <div class="right-nav">
        <button class="theme-toggle">üåô</button>
        <div class="mobile-menu">‚ò∞</div>
      </div>
    </nav>
    
    <!-- Mobile Navigation Menu -->
    <div class="mobile-nav">
      <div class="mobile-nav-close">‚úï</div>
      <ul class="mobile-nav-links">
        <li><a href="/">Home</a></li>
      </ul>
    </div>
   

      <div class="container">
        <div class="tabs">
  <button class="tab-button active" onclick="openTab(event, 'symptom-checker')">Symptom Checker</button>
  <button class="tab-button" onclick="openTab(event, 'MedImage')">Medical Assistant</button>
</div>

    
        <div id="symptom-checker" class="tab-content active">
          <h1><i class="fas fa-notes-medical"></i> Know Your Symptom</h1>

          <div id="chat-interface">
            <button class="guide-button" onclick="openGuideModal()">
  <i class="fas fa-question"></i>
</button>
            <!-- Floating 3D Model Nurse -->
            <div class="nurse-floating">
              <model-viewer 
              src="/static/doctor.glb" 
              alt="Nurse AI" 
              camera-controls 
              disable-zoom 
              autoplay 
              animation-name="*"
              style="width: 130px; height: 130px; background: none;">
          </model-viewer>
          
              <div class="nurse-bubble">Hi, I‚Äôm BatAI! Tell me how you‚Äôre feeling ü©∫</div>
            </div>
      
            <!-- Chat Window -->
            <div id="chat-window" class="chat-box"></div>
      
            <!-- Input Area -->
            <div class="chat-input-area">
              <input type="text" id="user-input" placeholder="Type your symptoms here..." onkeypress="handleKey(event)">
              <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        
          
            <div id="doctor-suggestions"></div>
        </div>
        
        
        
        
  
      <div id="MedImage" class="tab-content">
  <h1><i class="fas fa-robot"></i> AI Medical Assistant</h1>
  <p>Click the button below to launch the AI-powered medical assistant:</p>

  <a href="https://ai-medical-assistant-bot.streamlit.app/" target="_blank" rel="noopener noreferrer">
    <button class="btn btn-primary">Open Assistant</button>
  </a>
</div>

</div>



      </div>
<!-- Guide Modal HTML -->
<div class="guide-modal-overlay" id="guide-modal-overlay">
  <div class="guide-modal" id="guide-modal">
    <div class="guide-modal-close" onclick="closeGuideModal()">‚úï</div>
    <div class="guide-modal-content">
      <h2><i class="fas fa-question-circle"></i> Chatbot Usage Guide</h2>
      
      <div class="demo-images">
        <img src="static/chatbot1 (1).png" alt="Chatbot Demo 1" class="demo-image">
        <img src="static/chatbot1 (2).png" alt="Chatbot Demo 2" class="demo-image">
      </div>
      
      <div class="guidelines">
        <h3><i class="fas fa-info-circle"></i> How to Use the Medical Chatbot</h3>
        <ul>
          <li>Describe Your symptom within 3 messages</li>
          <li>The AI will help predict potential conditions and ask If you need doctor suggestion</li>
          <li>By answering yes,you can check the required doctors available nearby you.</li>
        </ul>
      </div>
      
    </div>
  </div>
</div>
    <!-- Appointment Booking Form -->
    <div id="appointment-form" class="modal" style="display: none">
      <h2><i class="fas fa-calendar-check"></i> Book Appointment</h2>
      <div class="modal-content">
        <div class="scrollable-form">
          <form id="appointmentForm">
            <fieldset>
              <legend><i class="fas fa-user-md"></i> Doctor Details</legend>
              <p>
                <strong>Doctor:</strong> <span id="form-doctor-name"></span>
              </p>
              <p>
                <strong>Specialization:</strong>
                <span id="form-doctor-specialization"></span>
              </p>
              <p>
                <strong>Hospital:</strong>
                <span id="form-doctor-hospital"></span>
              </p>
            </fieldset>
            <fieldset>
              <legend><i class="fas fa-clock"></i> Appointment Details</legend>
              <label for="appointmentDate"
                ><i class="fas fa-calendar-alt"></i> Select Date:</label
              >
              <select id="appointmentDate" required></select>

              <label for="appointmentTime"
                ><i class="fas fa-clock"></i> Select Time:</label
              >
              <select id="appointmentTime" required></select>
            </fieldset>
            <fieldset>
              <legend><i class="fas fa-user"></i> Your Details</legend>
              <label for="userName"
                ><i class="fas fa-user"></i> Your Name:</label
              >
              <input
                type="text"
                id="userName"
                placeholder="Enter your full name"
                required
              />

              <label for="userContact"
                ><i class="fas fa-phone"></i> Contact Number:</label
              >
              <input
                type="tel"
                id="userContact"
                placeholder="Enter your phone number"
                required
                pattern="[0-9]{10}"
              />

              <label for="userEmail"
                ><i class="fas fa-envelope"></i> Email Address:</label
              >
              <input
                type="email"
                id="userEmail"
                placeholder="Enter your email address"
                required
              />
            </fieldset>
            <div class="form-actions">
              <button type="submit">
                <i class="fas fa-check"></i> Confirm
              </button>
              <button type="button" onclick="closeModal('appointment-form')">
                <i class="fas fa-times"></i> Close
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
<!-- Background decorative elements moved *after* main content -->
<div class="decorative-background">
  <!-- Reduced number of circles for better performance -->
  <div class="circle-bg circle-1"></div>
  <div class="circle-bg circle-2"></div>
  <div class="circle-bg circle-3"></div>
  <div class="circle-bg circle-4"></div>
  
  <!-- Fewer floating icons to reduce clutter -->
  <div class="icon-float icon-user">üë§</div>
  <div class="icon-float icon-calendar">üìÜ</div>
  <div class="icon-float icon-chart">üìä</div>
</div>
<!-- Lightbox Modal -->
<div id="lightbox-modal" class="lightbox-modal">
  <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
  <img class="lightbox-content" id="lightbox-img">
</div>
<!-- Feedback Modal HTML (keep this part as is, just the styling changes above) -->
<div id="feedback-modal" class="modalfeedback" style="display: none">
  <div class="modal-content">
     <!-- 3D Model with Speech Bubble -->
    <div class="feedback-model-container">
      <model-viewer 
        src="/static/cute_home_robot.glb" 
        alt="Thank You Model" 
        camera-controls 
        disable-zoom 
        autoplay 
        animation-name="*"
        style="background: none;">
      </model-viewer>
      <div class="feedback-bubble">
        Thank you for using our service! üíñ Your feedback helps us improve.
      </div>
    </div>
    <h2><i class="fas fa-comment-alt"></i> Share Your Experience</h2>
    <p>We'd love to hear your thoughts about using our symptom checker. Would you like to provide feedback?</p>
    <div class="modal-buttons">
      <button class="btn" onclick="redirectToFeedback()">
        <i class="fas fa-thumbs-up"></i> Yes, I'd love to
      </button>
      <button class="btn btn-secondary" onclick="closefeedbackModal('feedback-modal')">
        <i class="fas fa-times"></i> No, thanks
      </button>
    </div>
  </div>
</div>
<div class="modal-overlay" id="feedback-overlay" style="display: none"></div>
    <script>
// Animate floating icons
        const floatingIcons = document.querySelectorAll('.icon-float');
        floatingIcons.forEach((icon, index) => {
            icon.style.animation = `float 3s ease-in-out ${index * 0.5}s infinite`;
        });
      function openAIAssistantModal() {
    document.getElementById("aiAssistantModalOverlay").style.display = "block";
    document.getElementById("aiAssistantModalBox").style.display = "block";
  }

  function closeAIAssistantModal() {
    document.getElementById("aiAssistantModalOverlay").style.display = "none";
    document.getElementById("aiAssistantModalBox").style.display = "none";
  }
      // Theme toggle functionality
    const themeToggle = document.querySelector('.theme-toggle');
    const body = document.body;
    
    // Default to light theme
    let isDarkTheme = false;
    themeToggle.textContent = 'üåô';
    
    themeToggle.addEventListener('click', () => {
      isDarkTheme = !isDarkTheme;
      body.classList.toggle('dark-theme', isDarkTheme);
      
      if (isDarkTheme) {
        themeToggle.textContent = '‚òÄÔ∏è';
      } else {
        themeToggle.textContent = 'üåô';
      }
    });
    
    // Mobile menu functionality
    const mobileMenuBtn = document.querySelector('.mobile-menu');
    const mobileNav = document.querySelector('.mobile-nav');
    const mobileNavClose = document.querySelector('.mobile-nav-close');
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileNav.classList.add('active');
    });
    
    mobileNavClose.addEventListener('click', () => {
      mobileNav.classList.remove('active');
    });
      function openTab(event, tabId) {
        const tabs = document.querySelectorAll('.tab-content');
        const buttons = document.querySelectorAll('.tab-button');
    
        tabs.forEach((tab) => tab.classList.remove('active'));
        buttons.forEach((button) => button.classList.remove('active'));
    
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
      }
    
      let userId = "user_" + Math.random().toString(36).substring(2);
      let predictedDisease = null;  // ‚úÖ store disease from chatbot here
    
      // Utility function to replace asterisks with <strong> tags for bold
function formatBoldText(text) {
  return text.replace(/\*(.*?)\*/g, '<strong>$1</strong>'); // Replaces *text* with <strong>text</strong>
}

async function sendMessage() {
  const inputBox = document.getElementById('user-input');
  const responseBox = document.getElementById('chat-window');
  const message = inputBox.value.trim();
  if (!message) return;

  responseBox.innerHTML += `
    <div class="user-message">
      <p>${message}</p>
    </div>
  `;
  inputBox.value = '';

  const loadingId = `loading-${Date.now()}`;
  responseBox.innerHTML += `
    <div class="nurse-message" id="${loadingId}">
      <p>ü©∫ Aura is thinking...</p>
    </div>
  `;
  responseBox.scrollTop = responseBox.scrollHeight;

  try {
    const res = await fetch('/chatbot/diagnose', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: message, user_id: userId })
    });

    const data = await res.json();
    document.getElementById(loadingId)?.remove();

    if (data.disease) {
      predictedDisease = data.disease; // ‚úÖ Save disease globally
    }

    // Format and display each part of the nurse's response with bold formatting
    data.response.forEach(part => {
      const formattedResponse = formatBoldText(part); // Apply bold formatting
      responseBox.innerHTML += `
        <div class="nurse-message">
          <p>${formattedResponse}</p>
        </div>
      `;
    });

    responseBox.scrollTop = responseBox.scrollHeight;

    // ‚úÖ Auto-fetch doctors if user replies "yes" at complete stage
    if (data.stage === "complete") {
      const lowerMsg = message.toLowerCase();
      if (["yes", "yeah", "sure", "okay", "yep", "please do"].some(word => lowerMsg.includes(word))) {
        setTimeout(fetchDoctors, 500);
      }
    }

  } catch (err) {
    console.error(err);
    document.getElementById(loadingId)?.remove();
    responseBox.innerHTML += `
      <div class="nurse-message">
        <p>‚ö†Ô∏è Something went wrong. Please try again.</p>
      </div>
    `;
  }
}

      
    
      function handleKey(event) {
        if (event.key === 'Enter') sendMessage();
      }
    
      async function fetchDoctors() {
        const disease = predictedDisease;  // ‚úÖ Get disease directly from global
    
        if (!disease) {
          alert("Please predict a disease first.");
          return;
        }

        console.log("Fetching doctors for disease:", disease);

    
        const doctorSuggestions = document.getElementById("doctor-suggestions");
        doctorSuggestions.innerHTML = ""; // Clear previous suggestions
    
        try {
          const response = await fetch("/get_doctors", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ disease }),
          });
    
          let data;
          try {
            data = await response.json();
          } catch (jsonError) {
            const rawText = await response.text();
            console.error("API returned non-JSON response:", rawText);
            doctorSuggestions.innerHTML = `<p style="color: red;">Invalid server response: ${rawText}</p>`;
            return;
          }
    
          if (!Array.isArray(data.doctors) || data.doctors.length === 0) {
            doctorSuggestions.innerHTML = "<p>No doctors currently available for this condition.</p>";
            return;
          }
           console.log("List of doctors:", data.doctors);
          const doctorsHtml = data.doctors
            .map((doctor) => {
              if (typeof doctor !== "object") {
                console.error("Invalid doctor data:", doctor);
                return '<div class="doctor-card">Invalid doctor information</div>';
              }
    
              const achievements = Array.isArray(doctor.description?.achievements)
                ? doctor.description.achievements.map((ach) => `<li>${ach}</li>`).join("")
                : "<li>No achievements available.</li>";
    
              const degrees = Array.isArray(doctor.description?.degrees)
                ? doctor.description.degrees.map((degree) => `<li>${degree}</li>`).join("")
                : "<li>No degrees listed.</li>";
    
              return `
                <div class="doctor-card">
                  <h3><i class="fas fa-user-md"></i> Dr. ${doctor.name || "Name not available"}</h3>
                  <p><strong><i class="fas fa-stethoscope"></i> Specialization:</strong> ${doctor.specialization || "Specialization not available"}</p>
                  <p><strong><i class="fas fa-briefcase-medical"></i> Experience:</strong> ${doctor.description?.experience || "No experience details available."}</p>
                  <p><strong><i class="fas fa-graduation-cap"></i> Degrees:</strong></p>
                  <ul>${degrees}</ul>
                  <p><strong><i class="fas fa-award"></i> Achievements:</strong></p>
                  <ul>${achievements}</ul>
                  <p><strong><i class="fas fa-phone-alt"></i> Phone Number:</strong> ${doctor.phone_number || "Not available"}</p>
                  <p><strong><i class="fas fa-hospital"></i> Hospital:</strong> ${doctor.hospital || "Not available"}</p>
                  <p><strong><i class="fas fa-money-bill-wave"></i> Fees:</strong> ‚Çπ${doctor.fees || "Not specified"}</p>
                  <button onclick="openAppointmentForm('${encodeURIComponent(JSON.stringify(doctor))}')">
                    <i class="fas fa-calendar-check"></i> Book Appointment
                  </button>
                </div>
              `;
            })
            .join("");
    
          doctorSuggestions.innerHTML = doctorsHtml;
          // ‚úÖ Show feedback modal after successfully listing doctors
        setTimeout(() => {
            showFeedbackModal();
        }, 1500); // Show after 1.5 seconds
        } catch (error) {
          console.error("Error in fetchDoctors function:", error);
          doctorSuggestions.innerHTML = `<p style="color: red;">Error fetching doctors. Please try again later.</p>`;
        }
      }

      function openAppointmentForm(doctorString) {
        try {
          const doctor = JSON.parse(decodeURIComponent(doctorString)); // Decode and parse the doctor data

          document.getElementById("form-doctor-name").innerText = doctor.name;
          document.getElementById("form-doctor-specialization").innerText =
            doctor.specialization;
          document.getElementById("form-doctor-hospital").innerText =
            doctor.hospital;

          const availability = doctor.availability;
          const dateSelect = document.getElementById("appointmentDate");
          dateSelect.innerHTML = '<option value="">Select Date</option>';
          const timeSelect = document.getElementById("appointmentTime");
          timeSelect.innerHTML = '<option value="">Select Time</option>'; // Clear previous times

          Object.keys(availability).forEach((date) => {
            const dateOption = document.createElement("option");
            dateOption.value = date;
            dateOption.innerText = date;
            dateSelect.appendChild(dateOption);
          });

          dateSelect.onchange = function () {
            const selectedDate = dateSelect.value;
            timeSelect.innerHTML = '<option value="">Select Time</option>'; // Clear previous time options

            if (selectedDate && availability[selectedDate]) {
              Object.keys(availability[selectedDate]).forEach((time) => {
                const timeOption = document.createElement("option");
                timeOption.value = time;
                timeOption.innerText =
                  time +
                  " - Available slots: " +
                  availability[selectedDate][time];
                timeSelect.appendChild(timeOption);
              });
            }
          };

          document.getElementById("appointment-form").style.display = "block";
          document.getElementById("doctor-suggestions").style.display = "none";
        } catch (error) {
          console.error("Error in openAppointmentForm:", error);
          alert("There was an error processing the doctor's information.");
        }
      }

      function closeModal(id) {
        document.getElementById(id).style.display = "none";
      }

      document.getElementById("appointmentForm").onsubmit = function (event) {
        event.preventDefault(); // Prevent form from submitting
        bookAppointment(event); // Call the bookAppointment function
      };

      function bookAppointment(event) {
        // Get the patient's details from the form
        const name = document.getElementById("userName").value;
        const phone = document.getElementById("userContact").value;
        const email = document.getElementById("userEmail").value;
        const date = document.getElementById("appointmentDate").value;
        const time = document.getElementById("appointmentTime").value; // Fixed .value

        // Get the doctor's details from the DOM
        const doctorName =
          document.getElementById("form-doctor-name").innerText;
        const doctorSpecialization = document.getElementById(
          "form-doctor-specialization"
        ).innerText;
        const doctorHospital = document.getElementById(
          "form-doctor-hospital"
        ).innerText;

        // Combine date and time into one value
        const dateTime = `${date}T${time}`;

        // Check if all required fields are filled
        if (
          !name ||
          !phone ||
          !email ||
          !date ||
          !time ||
          !doctorName ||
          !doctorSpecialization ||
          !doctorHospital
        ) {
          alert("Please fill in all the fields.");
          return;
        }

        // Send data to the backend
        fetch("/doclist/appointment", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            patient_name: name,
            doctor_name: doctorName,
            doctor_specialization: doctorSpecialization,
            doctor_hospital: doctorHospital,
            phone: phone,
            email: email,
            date_time: dateTime,
          }),
        })
          .then((response) => response.json())
          .then((result) => {
            if (result.message) {
              alert(result.message); // Show success message
            } else {
              alert("Appointment booked successfully!");
            }

            // Reload the page to show the updated content (no redirect)
            location.reload();

            closeModal("appointment-form"); // Close the modal
          })
          .catch((err) => {
            console.error("Error booking appointment:", err);
            alert("There was an error booking the appointment.");
          });
      }

    

  // Adjust chat interface layout when input is focused on mobile
document.addEventListener('DOMContentLoaded', function() {
  const userInput = document.getElementById('user-input');
  const chatInterface = document.getElementById('chat-interface');
  const chatWindow = document.getElementById('chat-window');
  
  // Function to handle input focus on mobile
  function handleInputFocus() {
    // Check if we're on mobile
    if (window.innerWidth <= 768) {
      // When input is focused on mobile, adjust interface to maximize space
      chatWindow.style.maxHeight = '50vh'; // Ensure visibility of messages
      chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to latest message
      
      // Hide nurse bubble temporarily to save space when typing
      const nurseBubble = document.querySelector('.nurse-bubble');
      if (nurseBubble) {
        nurseBubble.style.display = 'none';
      }
    }
  }
  
  // Function to restore layout when input loses focus
  function handleInputBlur() {
    if (window.innerWidth <= 768) {
      chatWindow.style.maxHeight = '400px'; // Restore default height
      
      // Show nurse bubble again
      const nurseBubble = document.querySelector('.nurse-bubble');
      if (nurseBubble) {
        nurseBubble.style.display = '';
      }
    }
  }
  
  // Add event listeners if elements exist
  if (userInput) {
    userInput.addEventListener('focus', handleInputFocus);
    userInput.addEventListener('blur', handleInputBlur);
  }
  
  // Improve scrolling behavior after sending a message
  function improveScrolling() {
    const sendButton = document.querySelector('.chat-input-area button');
    if (sendButton) {
      const originalSendMessage = window.sendMessage;
      
      // Override the sendMessage function to ensure proper scrolling
      window.sendMessage = function() {
        // Call the original function
        if (typeof originalSendMessage === 'function') {
          originalSendMessage();
        }
        
        // Ensure scroll to bottom happens after DOM updates
        setTimeout(() => {
          if (chatWindow) {
            chatWindow.scrollTop = chatWindow.scrollHeight;
          }
        }, 100);
      };
    }
  }
  
  improveScrolling();
  
  // Make sure model-viewer size is responsive
  function adjustModelViewerSize() {
    const modelViewer = document.querySelector('model-viewer');
    if (modelViewer) {
      if (window.innerWidth <= 480) {
        modelViewer.style.width = '100px';
        modelViewer.style.height = '100px';
      } else if (window.innerWidth <= 768) {
        modelViewer.style.width = '110px';
        modelViewer.style.height = '110px';
      } else {
        modelViewer.style.width = '130px';
        modelViewer.style.height = '130px';
      }
    }
  }
  
  // Run once on load and whenever window is resized
  adjustModelViewerSize();
  window.addEventListener('resize', adjustModelViewerSize);
});

// Enhanced mobile experience - Hide floating elements when keyboard is visible
function setupMobileKeyboardHandler() {
  let originalWindowHeight = window.innerHeight;
  
  window.addEventListener('resize', function() {
    // If window height significantly decreases, keyboard is likely visible
    if (window.innerHeight < originalWindowHeight * 0.75) {
      // Hide decorative elements when keyboard is showing
      document.querySelectorAll('.circle-bg, .icon-float').forEach(el => {
        el.style.display = 'none';
      });
    } else {
      // Show decorative elements when keyboard is hidden
      document.querySelectorAll('.circle-bg, .icon-float').forEach(el => {
        el.style.display = '';
      });
      originalWindowHeight = window.innerHeight;
    }
  });
}
  // Modal open/close functions
  function openGuideModal() {
    document.getElementById('guide-modal').style.display = 'block';
    document.getElementById('guide-modal-overlay').style.display = 'block';
  }

  function closeGuideModal() {
    document.getElementById('guide-modal').style.display = 'none';
    document.getElementById('guide-modal-overlay').style.display = 'none';
  }

  // Manual carousel logic
  document.addEventListener("DOMContentLoaded", function () {
    const images = document.querySelectorAll('.demo-images .demo-image');
    const container = document.querySelector('.demo-images');

    let currentIndex = 0;

    // Hide all images except the first one
    function updateCarousel() {
      images.forEach((img, index) => {
        img.style.display = (index === currentIndex) ? 'block' : 'none';
      });
    }

    updateCarousel();

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.innerText = '‚ü®';
    prevBtn.style.marginRight = '10px';

    const nextBtn = document.createElement('button');
    nextBtn.innerText = '‚ü©';

    [prevBtn, nextBtn].forEach(btn => {
      btn.style.background = '#009688';
      btn.style.color = 'white';
      btn.style.border = 'none';
      btn.style.borderRadius = '50%';
      btn.style.width = '30px';
      btn.style.height = '30px';
      btn.style.cursor = 'pointer';
      btn.style.fontSize = '18px';
      btn.style.display = 'flex';
      btn.style.alignItems = 'center';
      btn.style.justifyContent = 'center';
    });

    // Add event listeners
    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      updateCarousel();
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % images.length;
      updateCarousel();
    });

    // Append buttons to carousel container
    const controlsWrapper = document.createElement('div');
    controlsWrapper.style.display = 'flex';
    controlsWrapper.style.justifyContent = 'center';
    controlsWrapper.style.marginBottom = '15px';
    controlsWrapper.appendChild(prevBtn);
    controlsWrapper.appendChild(nextBtn);

    container.parentNode.insertBefore(controlsWrapper, container);
  });
// Call this function when document is ready
document.addEventListener('DOMContentLoaded', setupMobileKeyboardHandler);

document.addEventListener('DOMContentLoaded', function() {
  // Get all demo images
  const demoImages = document.querySelectorAll('.demo-image');
  
  // Get the existing lightbox modal from your CSS
  const lightboxModal = document.getElementById('lightbox-modal');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxClose = document.querySelector('.lightbox-close');
  
  // Add click event to all demo images
  demoImages.forEach(img => {
    img.addEventListener('click', function() {
      lightboxImg.src = this.src;
      lightboxModal.style.display = 'block';
    });
  });
  
  // Close button functionality
  lightboxClose.addEventListener('click', function() {
    lightboxModal.style.display = 'none';
    lightboxImg.classList.remove('zoomed');
  });
  
  // Close on clicking outside the image
  lightboxModal.addEventListener('click', function(e) {
    if (e.target === lightboxModal) {
      lightboxModal.style.display = 'none';
      lightboxImg.classList.remove('zoomed');
    }
  });
  
  // Zoom functionality
  lightboxImg.addEventListener('click', function(e) {
    e.stopPropagation(); // Prevent modal close when clicking the image
    this.classList.toggle('zoomed');
  });
});
function showFeedbackModal() {
  document.getElementById('feedback-modal').style.display = 'block';
  document.getElementById('feedback-overlay').style.display = 'block';
  
  // Reload the model viewer to ensure animations play
  const modelViewer = document.querySelector('#feedback-modal model-viewer');
  if (modelViewer) {
    modelViewer.src = modelViewer.src; // Triggers reload
  }
}

function redirectToFeedback() {
  // Replace with your actual feedback form URL
  window.location.href = "https://docs.google.com/forms/d/e/1FAIpQLSeoloFZBHDPgsDRl3Zn7YzkhWUMccoN-4Xe-acwiwIukW-rBA/viewform?usp=dialog";
  closeModal('feedback-modal');
}
function closefeedbackModal(id) {
  document.getElementById(id).style.display = 'none';
  document.getElementById('feedback-overlay').style.display = "none";
}
    </script>
  </body>
</html>
